import { z } from 'zod';
import { queueService } from './service.ts';

// Generated by turbo gen queue
// Define a typed queue with input/output schemas and sensible defaults.
export const {{camelCase name}}Queue = queueService.defineQueue({
    name: '{{kebabCase name}}',
    // TODO: adjust input schema to your needs
    inputSchema: z.object({
        example: z.string(),
    }),
    // TODO: adjust output schema to your needs
    outputSchema: z.object({
        ok: z.boolean(),
    }),
    async process(input, ctx) {
        ctx.logger.info({ queue: ctx.queueName, input }, 'processing job');
        // Implement your logic here
        return { ok: true };
    },
    defaults: {
        attempts: 3,
        backoff: { type: 'exponential', delay: 500 },
        timeoutMs: 15_000,
        removeOnComplete: true,
        removeOnFail: false,
        concurrency: 5,
    },
});
