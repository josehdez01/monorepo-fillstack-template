import { createORPCClient } from '@orpc/client';
import { RPCLink } from '@orpc/client/fetch';
import type { ContractRouterClient } from '@orpc/contract';
import type { AppContract } from '@template/contracts/orpc/contract';

export type AppClient = ContractRouterClient<AppContract>;

export function makeClient(base: string): AppClient {
    const url = `${base.replace(/\/$/, '')}/rpc`;
    return createORPCClient(new RPCLink({ url }));
}
